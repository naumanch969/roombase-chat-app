{"version":3,"file":"script.js","mappings":"mBA0BA,MAAMA,EAAWC,SAASC,eAAe,aACnCC,EAAeF,SAASG,cAAc,kBACtCC,EAAWJ,SAASC,eAAe,aACnCI,EAAWL,SAASC,eAAe,SACnCK,EAAYN,SAASC,eAAe,cAGpCM,EAAcC,GAAGC,MAAMC,SAASC,OAAQ,CAC3CC,mBAAmB,IAEhBC,EAAmBN,EAAYM,SAC/BC,EAAeP,EAAYO,KAG3BC,EAASC,KAKfD,EAAOE,GAAG,gBAAkBC,IACzBC,MAAMD,GACNE,OAAOV,SAASW,KAAO,MAM1BN,EAAOO,KAAK,WAAY,CAAET,WAAUC,SAKpCC,EAAOE,GAAG,YAAcM,IAqDxB,IAAwBC,EAQHC,EARGD,EApDND,EAAKT,KAqDpBV,EAASsB,UAAYF,EAOHC,EA3DNF,EAAKE,MA4DjBpB,EAASqB,UAAY,SAClBD,EAAME,IAAKC,GAAS,OAAOA,EAAKf,iBAAiBgB,KAAK,UAIrDvB,IACDA,EAAUwB,YAAc,IAAIL,EAAMM,aA5DxChB,EAAOE,GAAG,UAAYe,KA8BtB,SAAuBA,GACpB,MAAMC,EAAMjC,SAASkC,cAAc,OACnCD,EAAIE,UAAUC,IAAI,WAClBH,EAAIP,UAAY,mBAAmBM,EAAQnB,kBAAkBmB,EAAQK,+CAEhEL,EAAQM,gBAGbpC,EAAaqC,YAAYN,EAC5B,CAtCGO,CAAcR,GAGd9B,EAAauC,UAAYvC,EAAawC,eAMzC3C,EAAS4C,iBAAiB,SAAWC,IAClCA,EAAEC,iBAEF,MAAMC,EAAYF,EAAEG,OAA2BC,SAASC,UACrD,OAEG/B,EAAM4B,EAASI,MAGrBnC,EAAOO,KAAK,cAAeJ,GAG3B4B,EAASI,MAAQ,GACjBJ,EAASK,S","sources":["webpack://chatapplication/./public/js/script.ts"],"sourcesContent":["/**\n * Client-side chat application\n * Handles Socket.IO communication and DOM updates\n */\n\n// Type definitions for Qs library\ninterface QsParseOptions {\n   ignoreQueryPrefix?: boolean;\n}\n\ndeclare const Qs: {\n   parse: (str: string, options?: QsParseOptions) => Record<string, string>;\n};\n\ninterface Message {\n   username: string;\n   text: string;\n   time: string;\n}\n\ninterface RoomUsersData {\n   room: string;\n   users: Array<{ username: string }>;\n}\n\n// DOM elements\nconst chatForm = document.getElementById(\"chat-form\") as HTMLFormElement;\nconst chatMessages = document.querySelector(\".chat-messages\") as HTMLDivElement;\nconst roomName = document.getElementById(\"room-name\") as HTMLElement;\nconst userList = document.getElementById(\"users\") as HTMLUListElement;\nconst userCount = document.getElementById(\"user-count\") as HTMLElement;\n\n// Get username and room from URL query parameters\nconst queryParams = Qs.parse(location.search, {\n   ignoreQueryPrefix: true,\n});\nconst username: string = queryParams.username as string;\nconst room: string = queryParams.room as string;\n\n// Initialize Socket.IO connection\nconst socket = io();\n\n/**\n * Handle username error (duplicate username)\n */\nsocket.on(\"usernameError\", (msg: string) => {\n   alert(msg);\n   window.location.href = \"/\";\n});\n\n/**\n * Emit join room event with username and room data\n */\nsocket.emit(\"joinRoom\", { username, room });\n\n/**\n * Handle room users update\n */\nsocket.on(\"roomUsers\", (data: RoomUsersData) => {\n   outputRoomName(data.room);\n   outputUsers(data.users);\n});\n\n/**\n * Handle incoming messages from server\n */\nsocket.on(\"message\", (message: Message) => {\n   outputMessage(message);\n\n   // Auto-scroll to latest message\n   chatMessages.scrollTop = chatMessages.scrollHeight;\n});\n\n/**\n * Handle chat form submission\n */\nchatForm.addEventListener(\"submit\", (e: SubmitEvent) => {\n   e.preventDefault();\n\n   const msgInput = (e.target as HTMLFormElement).elements.namedItem(\n      \"msg\"\n   ) as HTMLInputElement;\n   const msg = msgInput.value;\n\n   // Emit message to server\n   socket.emit(\"chatMessage\", msg);\n\n   // Clear input and refocus\n   msgInput.value = \"\";\n   msgInput.focus();\n});\n\n/**\n * Output message to the DOM\n * @param message - The message object containing username, text, and time\n */\nfunction outputMessage(message: Message): void {\n   const div = document.createElement(\"div\");\n   div.classList.add(\"message\");\n   div.innerHTML = `<p class=\"meta\">${message.username} <span>${message.time}</span></p>\n   <p class=\"text\">\n      ${message.text}\n   </p>`;\n\n   chatMessages.appendChild(div);\n}\n\n/**\n * Update room name in the DOM\n * @param roomName - The name of the current room\n */\nfunction outputRoomName(roomNameValue: string): void {\n   roomName.innerHTML = roomNameValue;\n}\n\n/**\n * Update users list in the DOM\n * @param users - Array of users in the room\n */\nfunction outputUsers(users: Array<{ username: string }>): void {\n   userList.innerHTML = `\n    ${users.map((user) => `<li>${user.username}</li>`).join(\"\")}\n  `;\n   \n   // Update user count badge\n   if (userCount) {\n      userCount.textContent = `(${users.length})`;\n   }\n}\n"],"names":["chatForm","document","getElementById","chatMessages","querySelector","roomName","userList","userCount","queryParams","Qs","parse","location","search","ignoreQueryPrefix","username","room","socket","io","on","msg","alert","window","href","emit","data","roomNameValue","users","innerHTML","map","user","join","textContent","length","message","div","createElement","classList","add","time","text","appendChild","outputMessage","scrollTop","scrollHeight","addEventListener","e","preventDefault","msgInput","target","elements","namedItem","value","focus"],"ignoreList":[],"sourceRoot":""}