(()=>{"use strict";const e=document.getElementById("chat-form"),n=document.querySelector(".chat-messages"),t=document.getElementById("room-name"),s=document.getElementById("users"),o=document.getElementById("user-count"),r=Qs.parse(location.search,{ignoreQueryPrefix:!0}),m=r.username,a=r.room,c=io();c.on("usernameError",e=>{alert(e),window.location.href="/"}),c.emit("joinRoom",{username:m,room:a}),c.on("roomUsers",e=>{var n,r;n=e.room,t.innerHTML=n,r=e.users,s.innerHTML=`\n    ${r.map(e=>`<li>${e.username}</li>`).join("")}\n  `,o&&(o.textContent=`(${r.length})`)}),c.on("message",e=>{!function(e){const t=document.createElement("div");t.classList.add("message"),t.innerHTML=`<p class="meta">${e.username} <span>${e.time}</span></p>\n   <p class="text">\n      ${e.text}\n   </p>`,n.appendChild(t)}(e),n.scrollTop=n.scrollHeight}),e.addEventListener("submit",e=>{e.preventDefault();const n=e.target.elements.namedItem("msg"),t=n.value;c.emit("chatMessage",t),n.value="",n.focus()})})();
//# sourceMappingURL=script.js.map